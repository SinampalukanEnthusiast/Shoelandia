{% extends "store/main.html" %} {% load static %} {% block content %}

<div class="container-fluid d-flex justify-content-center">
  <div class="col d-flex">
    <div class="col-lg-3"></div>
    <div class="row">
      <div class="col">
        <div class="container-fluid pb-5">
          <img
            class="rounded"
            data-src="holder.js/100px260/"
            alt="100%x260"
            style="max-width: 40rem; min-height: 40rem; width: auto"
            src="{{product.imageURL}}"
            data-holder-rendered="true"
          />
        </div>
      </div>
      <div class="col">
        <div class="">
          <div class="card-body p-0">
            <h1 class="font-weight-normal">{{product.get_full_name}}</h1>
            <h5 class="font-weight-light">&#x20b1;{{product.price}}</h5>

            <p>{{product.description}}</p>
          </div>
        </div>
        <hr />
        <div>
          <div class="d-flex pb-3">
            <button
              type="button"
              id="add-button"
              value="{{product.id}}"
              class="btn btn-success btn-lg w-75"
            >
              Add to basket
            </button>
            <div class="ml-auto p-2">
              <label for="select" class="font-weight-normal">Qty</label>
              <select id="select">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
              </select>
            </div>
          </div>
        </div>
        <script>
          $(document).on("click", "#add-button", function (e) {
            e.preventDefault();
            $.ajax({
              type: "POST",
              url: '{% url "basket_add" %}',
              data: {
                product_id: $("#add-button").val(),
                product_qty: $("#select option:selected").text(),
                csrfmiddlewaretoken: "{{csrf_token}}",
                action: "POST",
              },
              success: function (json) {
                console.log(json);
                document.getElementById("basket-qty").innerHTML = json.qty;
              },
              error: function (xhr, errmsg, err) {},
            });
          });
        </script>
      </div>
    </div>
    <div class="col-lg-2 ml-auto p-2"></div>
  </div>
</div>
<div class="container-fluid pb-5">
  <hr />
  <h1 class="display-4">Related Items</h1>
  <div>
    <img
      class="rounded m-2"
      data-src="holder.js/100px260/"
      alt="100%x260"
      style="max-width: 20rem; min-height: 20rem; width: auto"
      src="{{product.imageURL}}"
      data-holder-rendered="true"
    />
    <img
      class="rounded m-2"
      data-src="holder.js/100px260/"
      alt="100%x260"
      style="max-width: 20rem; min-height: 20rem; width: auto"
      src="{{product.imageURL}}"
      data-holder-rendered="true"
    />
  </div>
</div>
<div class="col-lg-12 mx-auto">
  <hr />
  <h1 class="display-4">Reviews</h1>
</div>
{% endblock content %}
